# 文件上传方案

## 方案一  直接file文件传入服务端

通过formdata对象将File对象传入后端，后端解析二进制流直接处理保存，注意：传输格式要用multipart/form-data。

案例为node端的multiparty或者formidable。直接解析文件上传

```
<form action="" enctype="multipart/form-data">
    <lable for="cc">文件</lable>
    <input type="file" id="cc">
    <img src="" alt="" >
    <p></p>
</form>
```

```
//js部分
//		获取标签中的文件对象
        var file = inputFile.files[0];
        console.log(file);
//		将文件包裹在formData对象中
        var formData = new FormData();
        formData.append("file", file);
```

## 方案二 传输blob二进制流到服务端

这种方案没有实践操作，可以参考dolu，实现方式为把base64转换成blob，用formdata包装传输到后端，一样要注意传输格式要用multipart/form-data。

node端用的是express的multer。

*方案一和方案二两种形式要认真研究，虽然都是二进制流，但一个是有包装，一个是没有包装，主要是理解multipary、formidable、multer直接的差别*

## 方案三 直接传输base64字符串到 后端，直接解析。

base64的大小较大，base64会增大约30%的文件体积，一般转换为Blob后能够压缩体积。因此小文件可以使用这个方式传输。参考java方式（Image.java）的实现方式。因为传输的是字符串，可以不用使用multipart/form-data格式。



Blob对象有四个相关封装的api，File对象、FileList对象、FileReader对象、URL对象

